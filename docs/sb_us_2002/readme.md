# US 2002

## 1. Context

It is the first time this task was assigned.

## 2. Requirements

**US 2002:** As Operator, I want to register an application of a candidate for a job opening and import all files 
received.


**Acceptance Criteria:**

- **2002.1.** The Operator initiates the application process.

- **2002.2.** The system should import, automatically, the data from the Application File Bot.

- **2002.3.** The files should be kept in the same shared folder.

- **2002.4.** There must be a record indicating that the candidate submitted the application.

- **2002.5.** The candidate should be created, if it does not exist.


**Dependencies/References:**

This functionality has a dependency on [_US G007_](../us_g007) that pertains to the authentication and authorization for
all users and functionalities.
Additionally, this functionality is related to [_US 2001_](../sb_us_2001) since the data to be imported is going to be processed
first by the Application File Bot.

_Reference 2002.1:_ Import the data from the file that was processed by the Application File Bot in Req 2001. 
The files should be kept in the same shared folder, but the Backoffice application needs to know the references to 
the file locations.


**Client Clarifications:**

> **Question:** Is it the Operator who registers an application, or does the system do it automatically? Also, how does 
> the application verification integrates the plugin in the process?
>
> **Answer:** In US 2002, the Operator registers the application. For this purpose, the Operator initiates the process,
> but the system should import, automatically, the resulting data from the Application File Bot (References in US2002).
> The plugin mentioned enters this process through US 2003, where the Operator generates a template file with the data
> to be entered to validate and application. In US2004, the Operator, after filling in the specific data of the
> application (based in the previous template file), submits that file in the system, which will be used for the system
> to evaluate/verify the application. If the criteria are not meet, the application is rejected.


> **Question:** US2002 - UI and UX. I'd like to know what is the expected flow of executing US2002 (application 
> registration and files import, by the operator). Can you reproduce step by step which actions should the operator 
> execute? Example: 1. The system asks the operator for the candidate's email. 2. The operator enters the candidate's 
> email. 3. The system asks for the job reference. 4. The operator enters the job reference. 5. The system creates the 
> job application, if there is data for it in the shared folder.
>
> **Answer:** There are no specific requirements for the UI/UX but I think it will be more user friendly if the 
> Operator could start the process by selecting the shared folder for the application to be imported.


> **Question:** Regarding the register of the candidates, should the data be entered manually or imported from the file
> with the candidate's date?
> 
> **Answer:** It makes sense the information to be imported from the file, **within the scope of the US2002**. Eventually,
> provide the user the possibility to make changes if necessary. **US2000a refers to a functionality for the Operator to 
> manually register candidates. (Note: Response updated on 2024/04/18, in bold)**


> **Question:** The operator can register a candidate: does he put the info manually or has to be read of the file 
> generated by the bot? This user will appear then in the backoffice...enable as default I think. Then the admin, 
> can also register manually a candidate as the operator did it? I don't understand at all the different between a 
> registration of the candidate made by the admin or made by the operator.
> 
> **Answer:** **See Q74.** US2000a is for the Operator to manually register a candidate and his/her user in the system. 
> US2002 is for import of the applications from the data in the files produced by the application file bot. 
> If the candidate does not exist, it should be created. I think there is no registration of a candidate by the admin.


> **Question:** In the description of the US, the PO mentions the importance of the files and then in reference to it,
> importing data from the file. Could you clarify what the import refers to? Are they distinct imports? Do they have
> different destinations?
> 
> **Answer:** In this US, I'm referring to the import of the files generated by the Application File Bot. When I mention
> the data, it will be the data from the text file "A text file with the data of the application and candidate"
> section 2.2.3, one of the generated files.


> **Question:** After the files in the shared folder are used by the Operator to register and application, should they
> remain in the folder or be deleted? If they are not deleted, how do we determine which ones have not yet been "used"?
> 
> **Answer:** Assuming they have already been imported into the system, I have no additional requirements regarding the
> files. The second question is a problem that should be addressed by the proposed solution. I have nothing to say about
> that aspect.


> **Question:** What needs to be registered in the system?
> 
> **Answer:** There must be a record indicating that the candidate in question submitted the application, and all the
> submitted files must be record/imported into the system.

## 3. Analysis

The main goal of this functionality is to register the candidate application's with the information given by the files
produced by the Applications File Bot.

When the candidate doesn't exist in the system, it should be created, using the information imported in the files.


### 3.1 System Sequence Diagram

![system sequence diagram](US2002_SSD.svg)

### 3.2 Domain Model Related

![domain model related](domain-model-excerpt.svg)


## 4. Design

To develop this functionality, it's needed to use a four-layered approach based on DDD (Domain-Driven Design)
architecture: Presentation, Application, Domain and Persistence.

To register an application, it is important to use the information present on the files produced by the Application File
Bot and to go to the repository to gather the information related to the job opening.

To be able to promote encapsulation between layers, it will be used DTOs.

**_Classes Used_**

**Domain Layer Classes**

* JobOpening
* Application
* Candidate

**Persistence Layer Classes**

* RepositoryFactory
* JobOpeningRepository
* ApplicationRepository


**Application Layer Classes**

* RegisterApplicationController
* JobOpeningMapper
* JobOpeningDTO
* ApplicationMapper
* ApplicationDTO


**Presentation Layer Classes**

* RegisterApplicationUI


### 4.1. Realization

### 4.2. Class Diagram

![a class diagram]()

### 4.3. Applied Patterns

### 4.4. Tests

*Include here the main tests used to validate the functionality. Focus on how they relate to the acceptance criteria.*

**Test 1:** Verifies that it is not possible to ...

**Refers to Acceptance Criteria:** G002.1

````
@Test(expected = IllegalArgumentException.class)
public void ensureXxxxYyyy() {
...
}
````

## 5. Implementation

*In this section the team should present, if necessary, some evidencies that the implementation is according to the
design. It should also describe and explain other important artifacts necessary to fully understand the implementation
like, for instance, configuration files.*

*It is also a best practice to include a listing (with a brief summary) of the major commits regarding this requirement.*

## 6. Integration/Demonstration

In this section the team should describe the efforts realized in order to integrate this functionality with the other
parts/components of the system

It is also important to explain any scripts or instructions required to execute an demonstrate this functionality

## 7. Observations

*This section should be used to include any content that does not fit any of the previous sections.*

*The team should present here, for instance, a critical prespective on the developed work including the analysis of
alternative solutioons or related works*

*The team should include in this section statements/references regarding third party works that were used in the
development this work.*