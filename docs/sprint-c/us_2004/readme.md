# US 2004

## 1. Context

This is the first time this user story is being requested.

## 2. Requirements

**US 2004** As {Operator}, I want to upload a text file with the data fields (requirements) of a candidate for its
verification.

**Acceptance Criteria:**

- **2004.1** The Operator must have access to the candidates' application files data.
- **2004.2** The Operator must be able to download the template generated by the defined requirements' plugin to then fill
it with the candidate's answers.

**Dependencies/References:**

**US1002 and US1007** | A job opening associated with a recruitment process is required so that the candidates can apply.

**US1008, US1009 ans US2003** | A requirement set must be associated with a job opening, and the template for them must be
accessible.

**US2002** | The candidates must be registered in the system and their application files must be imported.

**US2003** | The operator must be able to download the generated requirement template to insert the candidate's answers.

_Reference **2004.1**:_ **NFR09(LPROG)** - RequirementSpecifications and Interview Models. The support for this functionality
must follow specific technical requirements, specified in LPROG. The ANTLR tool should be used (https://www.antlr.org/).


**Client Clarifications:**

> **Question:** Who will fill in the responses in the template file?
>
> **Answer:** It will be the Operator, and as part of US2004, they will submit the filled-in file into the system.


> **Question:** We have a question about the management of the screen phase of the recruitment process. Specifically, 
> after the applications are filtered during the screening process, I'm unsure about who manages the results and oversees
> this phase. Could you please clarify if the responsibility for managing the screening results falls under the customer
> manager, the operators, or both?
>
> **Answer:** In US2003 and US2004 it is the Operator that “downloads” a template file to register the requirements, 
> registers the answers for the requirements in the file,  and then uploads the file. It is then the Costumer manager
> that executes the verification process (US1015) and executes the notification of the results (US1016).


> **Question:** Where are the requirements answers obtained from the candidates, so that the operator can then register 
> their answers in the template previously generated and submit them to the system? Are these answers already within the 
> files processed by the application file bot?
>
> **Answer:** We can assume that the operator has access to all the files submitted by the candidates (since he/she is the
> one that imports the files into the system – US2002). He/she can than consult these files in order to answer the questions
> in the requirements template file. She/he then submits the file with the answers (US2004).


> **Question:** Does US2004 only deals with the upload of the file to the system or also the registration of the candidate's
> answer by the Operator? I've seen many mentions about the file's answers but I want to understand if that aspect is also
> part of US2004.
>
> **Answer:** In US2003 the Operator downloads a template file that he/she uses to register the candidate requirements. 
> In US 2004, the Operator uploads a file with the requirements and the system should validate the file (verify of the 
> syntax is correct). US 1015 is the one that executes the verification of requirements for the candidates (based on the
> previously uploaded files).

## 3. Analysis

After inserting the candidate's answers on to the generated template, the Operator submits them into the system. This file
will be analysed in US1015.

Below there's a System Sequence Diagram (SSD) illustrating the expected behaviour of this functionality. After this diagram
is a partial domain model, with emphasis on US2004's concepts.

**US2004 System Sequence Diagram**

![system sequence diagram](./US2004_SSD/US2004_SSD.svg)

**US2004 Partial Domain Model**

![Partial Domain Model](./US2004_Domain_Model/domain-model-us-2004.svg)

## 4. Design

Before uploading the file into the system, the plugin ensures that its syntax is correct.

* **New Application Layer Classes**
* UploadRequirementAnswersController

**New Presentation Layer Classes**
* UploadRequirementAnswersUI

No new domain or persistence classes are to be added. 

The further topics illustrate and explain this functionality usage flow, and the correlation between its components.

### 4.1. Realization

![US1013 sequence diagram](./US2004_SD/us2004_sd.svg)

### 4.2. Class Diagram

![US1013 class diagram](./US2004_CD/us2004_cd.svg)

### 4.3. Applied Patterns

This topic presents the classes with the patterns applied to them along with justifications.

>**Repository Pattern**
> * JobOpeningRepository
> * ApplicationRepository
> * RequirementSpecificationRepository
> * RecruitmentProcessRepository
>
> **Justifications**
>
> * The JobOpeningRepository has stored all the jobOpening instances created in all sessions in its database, it's where
>   the instances can be rebuilt.
>
> * The recruitment processes are stored within the database, and must be rebuilt, so that the system can evaluate if the
>   instance associated with the chosen jobOpening is in the right phase.
>
> * The repository stores applications and their respective files, including the requirements answer file.
> 
> * The requirement specification repository knows what plugins are associated with which requirement.


>**Service Pattern**
> * JobOpeningManagementService
> * RequirementSpecificationManagementService
> * RecruitmentProcessManagementService
> * ApplicationListDTOService
> * ApplicationManagementService
>
> **Justifications**
>
> * JobOpeningManagementService is used in more than one functionality, and its in charge of managing request regarding
>   jobOpenings, serving as encapsulation between the controller and the JobOpeningRepository along with the domain classes.
>
> * RecruitmentProcessManagementService is used to check if the recruitment process associated with the chosen job opening
>   is in the right phase.
>
> * ApplicationManagementService allows to update an application regarding its requirement answers.
>
> * ApplicationListDTOService promotes layer encapsulation by converting application instances in DTOs.
> 
> * RequirementSpecificationManagementService is used in more than one functionality, and its in charge of managing request
>   regarding requirements, serving as encapsulation between the controller and the RequirementSpecificationRepository
>   along with the domain classes.


### 4.4. Tests


No new tests were made regarding the domain entities within this functionality.

> * [US1002 - JobOpening Tests](../../sprint-b/sb_us_1002/readme.md/#45-tests)
>
> * [US2002 - Application Tests](../../sprint-b/sb_us_2002/readme.md/#44-tests)


## 5. Implementation

*In this section the team should present, if necessary, some evidencies that the implementation is according to the
design. It should also describe and explain other important artifacts necessary to fully understand the implementation
like, for instance, configuration files.*

*It is also a best practice to include a listing (with a brief summary) of the major commits regarding this requirement.*

## 6. Integration/Demonstration

In this section the team should describe the efforts realized in order to integrate this functionality with the other
parts/components of the system

It is also important to explain any scripts or instructions required to execute an demonstrate this functionality

## 7. Observations

*This section should be used to include any content that does not fit any of the previous sections.*

*The team should present here, for instance, a critical prespective on the developed work including the analysis of
alternative solutioons or related works*

*The team should include in this section statements/references regarding third party works that were used in the
development this work.*